<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>

BODY {
    font-family:helvetica;
    background-color:#333;
    color:white;
    height:100%;
    padding:0;
    margin:0;
}

#main {
    padding:50px;
    padding-left:100px;
    height:100%
}


.pot, .slider {
    stroke : black;
    stroke-width : 1px;
    fill : white;
    fill-opacity : 1;
    cursor:pointer;
}

.pot text, .slider text {
  fill:black;
}

.slider rect {
  fill : black;
}

.pot path {
    fill:black;
}

path.pan {
    fill:steelblue;
}

.slider .background {
  fill:steelblue;
  stroke-width:0;
}

</style>
</head>
<body>

<button id="getARoom">get a room</button>

<script src="/socket.io/socket.io.js"></script>
<script src="../js/prong.js"></script>
<script src="omniscience.js"></script>
<script src="ubiquity.js"></script>
<script>

var tracks = [
  {volume : 10, pan : -50}
]

var ub = ubiquity( window, 'tracks');

ub.on('change', redraw);

var margin = {top: 40, right: 50, bottom: 200, left: 50},
    width = 960 - margin.left - margin.right,
    height = 220 - margin.bottom - margin.top;

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var slider = prong.slider2()
  .domain([1,100])
  .size(100)
  .breadth(40)
  .format(d3.format('f'))
  .key('volume')
  .horizontal(false);

var pot = prong.pot()
  .domain([-64,+63])
  .radius(20)
  .key('pan')
  .format(d3.format('d'));

function redraw(){
    svg.selectAll('g').remove();
    var strips = svg.selectAll('g')
      .data(tracks)
      .enter()
      .append('g')
      .attr('transform', function(d,i){
        return 'translate(' + i*100 + ',0)';
      })

  strips.append('g').call(pot);
  strips.append('g').attr('transform', 'translate(-20,50)').call(slider);
}

redraw()

</script>
</body>
</html>