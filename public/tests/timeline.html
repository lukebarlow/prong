<!DOCTYPE html>
<meta charset="utf-8">
<html>
    <head>
        <script src="../js/prong.js"></script>
        <link rel='stylesheet' href='testPage.css'></link>
        <script src="qadi-min.js"></script>
        <link rel="stylesheet" type="text/css" href="qadi.css"/>
    </head>
    <body>

        <iframe src="./"></iframe>

        <div id="main">

            Timeline<br />
            <span>
            <ul id="qadi">
                <li>Waveform is shown with timeline above it</li>
                <li>You can scroll horizontally to move back and forth along
                    the timeline. This is done either by holding the shift key
                    and using the scroll wheel, or (on Mac) by swiping with
                    two fingers left and right on the track pad.</li>
                <li>You can click and drag vertically on the timeline to zoom
                    in and out.</li>
            </ul>
            </span>
            <svg style="width:700px">
            <g id="timeline" transform="translate(10,10)" class="timeline"></g>
            <g id="waveform" transform="translate(10,30)"></g>
            </svg>
        </div>

        <script>
        // first load the sound
        prong.sound('https://dl.dropboxusercontent.com/u/5613860/audio/four_devices_computer.mp3', function(buffer){
            // then create the timeline
            var width = 600;
            var x = d3.scale.linear().domain([0, 20]).range([0, width]);
            var timeline = prong
                .timeline()
                .x(x)
                .scrollZone(d3.select('svg'));
            d3.select('#timeline').call(timeline);
            // then a single waveform
            var waveform = prong.waveform()
                .x(x)
                .timeline(timeline); // bound to the timeline
            d3.select('#waveform')
                .datum({
                    _buffer : buffer,
                    _channel : buffer.getChannelData(0)
                })
                .call(waveform);
        })
        </script>
    </body>
</html>